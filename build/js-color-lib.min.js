/*! js-color-lib 2013-07-22 */
!function(a){function b(a){if(a instanceof f.Dimension)return parseFloat(a.unit.is("%")?a.value/100:a.value);if("number"==typeof a)return a;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function c(a){return f.functions.hsla(a.h,a.s,a.l,a.a)}function d(a,c){return a instanceof f.Dimension&&a.unit.is("%")?parseFloat(a.value*c/100):b(a)}function e(a){return Math.min(1,Math.max(0,a))}var f={},g="object"==typeof exports&&exports,h="object"==typeof module&&module&&module.exports===g&&module;"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a.colorLib=f,define(function(){return f})):g&&!g.nodeType?h?(h.exports=f).colorLib=f:g.colorLib=f:a.colorLib=f,f.functions={rgb:function(a,b,c){return this.rgba(a,b,c,1)},rgba:function(a,c,e,g){var h=[a,c,e].map(function(a){return d(a,256)});return g=b(g),new f.Color(h,g)},hslToRgb:function(a,b,c){return this.hsla(a,b,c,1)},hsl:function(a,b,c){return this.hsla(a,b,c,1)},hsla:function(a,c,d,f){function g(a){return a=0>a?a+1:a>1?a-1:a,1>6*a?i+6*(h-i)*a:1>2*a?h:2>3*a?i+6*(h-i)*(2/3-a):i}a=b(a)%360/360,c=e(b(c)),d=e(b(d)),f=e(b(f));var h=.5>=d?d*(c+1):d+c-d*c,i=2*d-h;return this.rgba(255*g(a+1/3),255*g(a),255*g(a-1/3),f)},hsvToRgb:function(a,b,c){return this.hsva(a,b,c,1)},hsv:function(a,b,c){return this.hsva(a,b,c,1)},hsva:function(a,c,d,e){a=360*(b(a)%360/360),c=b(c),d=b(d),e=b(e);var f,g;f=Math.floor(a/60%6),g=a/60-f;var h=[d,d*(1-c),d*(1-g*c),d*(1-(1-g)*c)],i=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*h[i[f][0]],255*h[i[f][1]],255*h[i[f][2]],e)},hue:function(a){return new f.Dimension(Math.round(a.toHSL().h))},saturation:function(a){return new f.Dimension(Math.round(100*a.toHSL().s),"%")},lightness:function(a){return new f.Dimension(Math.round(100*a.toHSL().l),"%")},hsvhue:function(a){return new f.Dimension(Math.round(a.toHSV().h))},hsvsaturation:function(a){return new f.Dimension(Math.round(100*a.toHSV().s),"%")},hsvvalue:function(a){return new f.Dimension(Math.round(100*a.toHSV().v),"%")},red:function(a){return new f.Dimension(a.rgb[0])},green:function(a){return new f.Dimension(a.rgb[1])},blue:function(a){return new f.Dimension(a.rgb[2])},alpha:function(a){return new f.Dimension(a.toHSL().a)},luma:function(a){return new f.Dimension(Math.round(100*a.luma()*a.alpha),"%")},saturate:function(a,b){var d=a.toHSL();return d.s+=b.value/100,d.s=e(d.s),c(d)},desaturate:function(a,b){var d=a.toHSL();return d.s-=b.value/100,d.s=e(d.s),c(d)},lighten:function(a,b){var d=a.toHSL();return d.l+=b.value/100,d.l=e(d.l),c(d)},darken:function(a,b){var d=a.toHSL();return d.l-=b.value/100,d.l=e(d.l),c(d)},fadein:function(a,b){var d=a.toHSL();return d.a+=b.value/100,d.a=e(d.a),c(d)},fadeout:function(a,b){var d=a.toHSL();return d.a-=b.value/100,d.a=e(d.a),c(d)},fade:function(a,b){var d=a.toHSL();return d.a=b.value/100,d.a=e(d.a),c(d)},spin:function(a,b){var d=a.toHSL(),e=(d.h+b.value)%360;return d.h=0>e?360+e:e,c(d)},mix:function(a,b,c){c||(c=new f.Dimension(50));var d=c.value/100,e=2*d-1,g=a.toHSL().a-b.toHSL().a,h=((-1===e*g?e:(e+g)/(1+e*g))+1)/2,i=1-h,j=[a.rgb[0]*h+b.rgb[0]*i,a.rgb[1]*h+b.rgb[1]*i,a.rgb[2]*h+b.rgb[2]*i],k=a.alpha*d+b.alpha*(1-d);return new f.Color(j,k)},greyscale:function(a){return this.desaturate(a,new f.Dimension(100))},contrast:function(a,c,d,e){if(!a.rgb)return null;if("undefined"==typeof d&&(d=this.rgba(255,255,255,1)),"undefined"==typeof c&&(c=this.rgba(0,0,0,1)),c.luma()>d.luma()){var f=d;d=c,c=f}return e="undefined"==typeof e?.43:b(e),a.luma()*a.alpha<e?d:c},e:function(a){return new f.Anonymous(a instanceof f.JavaScript?a.evaluated:a)},escape:function(a){return new f.Anonymous(encodeURI(a.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(a){for(var b=Array.prototype.slice.call(arguments,1),c=a.value,d=0;d<b.length;d++)c=c.replace(/%[sda]/i,function(a){var c=a.match(/s/i)?b[d].value:b[d].toCSS();return a.match(/[A-Z]$/)?encodeURIComponent(c):c});return c=c.replace(/%%/g,"%"),new f.Quoted('"'+c+'"',c)},unit:function(a,b){return new f.Dimension(a.value,b?b.toCSS():"")},convert:function(a,b){return a.convertTo(b.value)},round:function(a,b){var c="undefined"==typeof b?0:b.value;return this._math(function(a){return a.toFixed(c)},null,a)},pi:function(){return new f.Dimension(Math.PI)},mod:function(a,b){return new f.Dimension(a.value%b.value,a.unit)},pow:function(a,b){if("number"==typeof a&&"number"==typeof b)a=new f.Dimension(a),b=new f.Dimension(b);else if(!(a instanceof f.Dimension&&b instanceof f.Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new f.Dimension(Math.pow(a.value,b.value),a.unit)},_math:function(a,b,c){if(c instanceof f.Dimension)return new f.Dimension(a(parseFloat(c.value)),null==b?c.unit:b);if("number"==typeof c)return a(c);throw{type:"Argument",message:"argument must be a number"}},argb:function(a){return new f.Anonymous(a.toARGB())},percentage:function(a){return new f.Dimension(100*a.value,"%")},color:function(a){if(a instanceof f.Quoted)return new f.Color(a.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(a){return this._isa(a,f.Color)},isnumber:function(a){return this._isa(a,f.Dimension)},isstring:function(a){return this._isa(a,f.Quoted)},iskeyword:function(a){return this._isa(a,f.Keyword)},isurl:function(a){return this._isa(a,f.URL)},ispixel:function(a){return this.isunit(a,"px")},ispercentage:function(a){return this.isunit(a,"%")},isem:function(a){return this.isunit(a,"em")},isunit:function(a,b){return a instanceof f.Dimension&&a.unit.is(b.value||b)?f.True:f.False},_isa:function(a,b){return a instanceof b?f.True:f.False},multiply:function(a,b){var c=a.rgb[0]*b.rgb[0]/255,d=a.rgb[1]*b.rgb[1]/255,e=a.rgb[2]*b.rgb[2]/255;return this.rgb(c,d,e)},screen:function(a,b){var c=255-(255-a.rgb[0])*(255-b.rgb[0])/255,d=255-(255-a.rgb[1])*(255-b.rgb[1])/255,e=255-(255-a.rgb[2])*(255-b.rgb[2])/255;return this.rgb(c,d,e)},overlay:function(a,b){var c=a.rgb[0]<128?2*a.rgb[0]*b.rgb[0]/255:255-2*(255-a.rgb[0])*(255-b.rgb[0])/255,d=a.rgb[1]<128?2*a.rgb[1]*b.rgb[1]/255:255-2*(255-a.rgb[1])*(255-b.rgb[1])/255,e=a.rgb[2]<128?2*a.rgb[2]*b.rgb[2]/255:255-2*(255-a.rgb[2])*(255-b.rgb[2])/255;return this.rgb(c,d,e)},softlight:function(a,b){var c=b.rgb[0]*a.rgb[0]/255,d=c+a.rgb[0]*(255-(255-a.rgb[0])*(255-b.rgb[0])/255-c)/255;c=b.rgb[1]*a.rgb[1]/255;var e=c+a.rgb[1]*(255-(255-a.rgb[1])*(255-b.rgb[1])/255-c)/255;c=b.rgb[2]*a.rgb[2]/255;var f=c+a.rgb[2]*(255-(255-a.rgb[2])*(255-b.rgb[2])/255-c)/255;return this.rgb(d,e,f)},hardlight:function(a,b){var c=b.rgb[0]<128?2*b.rgb[0]*a.rgb[0]/255:255-2*(255-b.rgb[0])*(255-a.rgb[0])/255,d=b.rgb[1]<128?2*b.rgb[1]*a.rgb[1]/255:255-2*(255-b.rgb[1])*(255-a.rgb[1])/255,e=b.rgb[2]<128?2*b.rgb[2]*a.rgb[2]/255:255-2*(255-b.rgb[2])*(255-a.rgb[2])/255;return this.rgb(c,d,e)},difference:function(a,b){var c=Math.abs(a.rgb[0]-b.rgb[0]),d=Math.abs(a.rgb[1]-b.rgb[1]),e=Math.abs(a.rgb[2]-b.rgb[2]);return this.rgb(c,d,e)},exclusion:function(a,b){var c=a.rgb[0]+b.rgb[0]*(255-a.rgb[0]-a.rgb[0])/255,d=a.rgb[1]+b.rgb[1]*(255-a.rgb[1]-a.rgb[1])/255,e=a.rgb[2]+b.rgb[2]*(255-a.rgb[2]-a.rgb[2])/255;return this.rgb(c,d,e)},average:function(a,b){var c=(a.rgb[0]+b.rgb[0])/2,d=(a.rgb[1]+b.rgb[1])/2,e=(a.rgb[2]+b.rgb[2])/2;return this.rgb(c,d,e)},negation:function(a,b){var c=255-Math.abs(255-b.rgb[0]-a.rgb[0]),d=255-Math.abs(255-b.rgb[1]-a.rgb[1]),e=255-Math.abs(255-b.rgb[2]-a.rgb[2]);return this.rgb(c,d,e)},tint:function(a,b){return this.mix(this.rgb(255,255,255),a,b)},shade:function(a,b){return this.mix(this.rgb(0,0,0),a,b)},extract:function(a,b){return b=b.value-1,a.value[b]}};for(var i=[{name:"ceil"},{name:"floor"},{name:"sqrt"},{name:"abs"},{name:"tan",unit:""},{name:"sin",unit:""},{name:"cos",unit:""},{name:"atan",unit:"rad"},{name:"asin",unit:"rad"},{name:"acos",unit:"rad"}],j=function(a,b){return function(c){return null!=b&&(c=c.unify()),this._math(Math[a],b,c)}},k=0;k<i.length;k++)f.functions[i[k].name]=j(i[k].name,i[k].unit);f.functionCall=function(a,b){this.env=a,this.currentFileInfo=b},f.functionCall.prototype=f.functions,f.Color=function(a,b){this.rgb=Array.isArray(a)?a:6===a.length?a.match(/.{2}/g).map(function(a){return parseInt(a,16)}):a.split("").map(function(a){return parseInt(a+a,16)}),this.alpha="number"==typeof b?b:1},f.Color.prototype={type:"Color",eval:function(){return this},luma:function(){return.2126*this.rgb[0]/255+.7152*this.rgb[1]/255+.0722*this.rgb[2]/255},toCSS:function(a,b){var c=a&&a.compress&&!b;if(this.alpha<1)return"rgba("+this.rgb.map(function(a){return Math.round(a)}).concat(this.alpha).join(","+(c?"":" "))+")";var d=this.rgb.map(function(a){return a=Math.round(a),a=(a>255?255:0>a?0:a).toString(16),1===a.length?"0"+a:a}).join("");return c&&(d=d.split(""),d=d[0]===d[1]&&d[2]===d[3]&&d[4]===d[5]?d[0]+d[2]+d[4]:d.join("")),"#"+d},operate:function(a,b,c){var d=[];c instanceof f.Color||(c=c.toColor());for(var e=0;3>e;e++)d[e]=f.operate(a,b,this.rgb[e],c.rgb[e]);return new f.Color(d,this.alpha+c.alpha)},toHSL:function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=(g+h)/2,j=g-h;if(g===h)a=b=0;else{switch(b=i>.5?j/(2-g-h):j/(g+h),g){case c:a=(d-e)/j+(e>d?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,l:i,a:f}},toHSV:function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=g,j=g-h;if(b=0===g?0:j/g,g===h)a=0;else{switch(g){case c:a=(d-e)/j+(e>d?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,v:i,a:f}},toARGB:function(){var a=[Math.round(255*this.alpha)].concat(this.rgb);return"#"+a.map(function(a){return a=Math.round(a),a=(a>255?255:0>a?0:a).toString(16),1===a.length?"0"+a:a}).join("")},compare:function(a){return a.rgb?a.rgb[0]===this.rgb[0]&&a.rgb[1]===this.rgb[1]&&a.rgb[2]===this.rgb[2]&&a.alpha===this.alpha?0:-1:-1}},f.Dimension=function(a,b){this.value=parseFloat(a),this.unit=b&&b instanceof f.Unit?b:new f.Unit(b?[b]:void 0)},f.Dimension.prototype={type:"Dimension",accept:function(a){this.unit=a.visit(this.unit)},eval:function(){return this},toColor:function(){return new f.Color([this.value,this.value,this.value])},toCSS:function(a){if(a&&a.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var b=this.value,c=String(b);if(0!==b&&1e-6>b&&b>-1e-6&&(c=b.toFixed(20).replace(/0+$/,"")),a&&a.compress){if(0===b&&!this.unit.isAngle())return c;b>0&&1>b&&(c=c.substr(1))}return c+this.unit.toCSS(a)},operate:function(a,b,c){var d=f.operate(a,b,this.value,c.value),e=this.unit.clone();if("+"===b||"-"===b)if(0===e.numerator.length&&0===e.denominator.length)e.numerator=c.unit.numerator.slice(0),e.denominator=c.unit.denominator.slice(0);else if(0===c.unit.numerator.length&&0===e.denominator.length);else{if(c=c.convertTo(this.unit.usedUnits()),a.strictUnits&&c.unit.toString()!==e.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+e.toString()+"' and '"+c.unit.toString()+"'.");d=f.operate(a,b,this.value,c.value)}else"*"===b?(e.numerator=e.numerator.concat(c.unit.numerator).sort(),e.denominator=e.denominator.concat(c.unit.denominator).sort(),e.cancel()):"/"===b&&(e.numerator=e.numerator.concat(c.unit.denominator).sort(),e.denominator=e.denominator.concat(c.unit.numerator).sort(),e.cancel());return new f.Dimension(d,e)},compare:function(a){if(a instanceof f.Dimension){var b=this.unify(),c=a.unify(),d=b.value,e=c.value;return e>d?-1:d>e?1:c.unit.isEmpty()||0===b.unit.compare(c.unit)?0:-1}return-1},unify:function(){return this.convertTo({length:"m",duration:"s",angle:"rad"})},convertTo:function(a){var b,c,d,e,g=this.value,h=this.unit.clone(),i={};if("string"==typeof a){for(b in f.UnitConversions)f.UnitConversions[b].hasOwnProperty(a)&&(i={},i[b]=a);a=i}for(c in a)a.hasOwnProperty(c)&&(e=a[c],d=f.UnitConversions[c],h.map(function(a,b){return d.hasOwnProperty(a)?(b?g/=d[a]/d[e]:g*=d[a]/d[e],e):a}));return h.cancel(),new f.Dimension(g,h)}},f.UnitConversions={length:{m:1,cm:.01,mm:.001,"in":.0254,pt:.0254/72,pc:12*(.0254/72)},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},f.Unit=function(a,b,c){this.numerator=a?a.slice(0).sort():[],this.denominator=b?b.slice(0).sort():[],this.backupUnit=c},f.Unit.prototype={type:"Unit",clone:function(){return new f.Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},toCSS:function(a){return this.numerator.length>=1?this.numerator[0]:this.denominator.length>=1?this.denominator[0]:a&&a.strictUnits||!this.backupUnit?"":this.backupUnit},toString:function(){var a,b=this.numerator.join("*");for(a=0;a<this.denominator.length;a++)b+="/"+this.denominator[a];return b},compare:function(a){return this.is(a.toString())?0:-1},is:function(a){return this.toString()===a},isAngle:function(){return f.UnitConversions.angle.hasOwnProperty(this.toCSS())},isEmpty:function(){return 0===this.numerator.length&&0===this.denominator.length},isSingular:function(){return this.numerator.length<=1&&0===this.denominator.length},map:function(a){var b;for(b=0;b<this.numerator.length;b++)this.numerator[b]=a(this.numerator[b],!1);for(b=0;b<this.denominator.length;b++)this.denominator[b]=a(this.denominator[b],!0)},usedUnits:function(){var a,b,c={};for(b in f.UnitConversions)f.UnitConversions.hasOwnProperty(b)&&(a=f.UnitConversions[b],this.map(function(d){return a.hasOwnProperty(d)&&!c[b]&&(c[b]=d),d}));return c},cancel:function(){var a,b,c,d={};for(b=0;b<this.numerator.length;b++)a=this.numerator[b],c||(c=a),d[a]=(d[a]||0)+1;for(b=0;b<this.denominator.length;b++)a=this.denominator[b],c||(c=a),d[a]=(d[a]||0)-1;this.numerator=[],this.denominator=[];for(a in d)if(d.hasOwnProperty(a)){var e=d[a];if(e>0)for(b=0;e>b;b++)this.numerator.push(a);else if(0>e)for(b=0;-e>b;b++)this.denominator.push(a)}0===this.numerator.length&&0===this.denominator.length&&c&&(this.backupUnit=c),this.numerator.sort(),this.denominator.sort()}}}(this);